
#+SETUPFILE: ../res/mathsetup.org
#+INCLUDE: ../res/include.org

#+OPTIONS: toc:1 num:nil
# [[file:../img/ly-ngu-vong-nguyet.jpg]]

* Existence and invariance by special bdf of the renormalised energy.

Let \( f: (\Sigma, \partial\Sigma) \longrightarrow  (M,\partial M) \) be smooth map
from a Riemann surface to an asymptotically hyperbolic manifold \( M \). Let \( r \) be a
special bdf of \( M \), \( \bar g = r^2 g \) be the metric underwhich \( M \) is compact, and \( A_\epsilon(f), E_\epsilon(f) \) be the area and energy of \(
f \) in the region \( r\geq \epsilon \) as a map from \( (\Sigma,h) \) to \( (M,g) \)
for any choice of metric \( h \) in the natural conformal class of \( \Sigma \). 

Denote by 
 - \( q(f)_{g} \) and \( q(f)_{\bar g} = r^2 q(f)_{g} \) the quadratic differentials of \( f \) from the Riemann surface \( \Sigma \) to the Riemannian manifolds \( (M, g) \) and \( (M,\bar g) \) respectively.
 - \( |q(f)_g| \) and \( |q(f)_{\bar g}| \) their norm under \( h \).

We will prove that

#+ATTR_LATEX: :options [Renormalised energy]
#+ATTR_HTML: :id prop:renorm-en :btit (Renormalised energy) 
#+BEGIN_proposition
#+LATEX: \label{prop:renorm-en}
Under no further supposition, one has
\begin{align}
  E_{\epsilon}(f)-2A_\epsilon(f) &= \frac{1}{4} \int_{r\geq\epsilon}\frac{1}{r^2} \frac{|q(f)_{\bar g}|^2}{\tr_h(f^* \bar g) + 2 \sqrt{\det_h(f^* \bar g)}} dA_h \label{eq:en-1}\\
       &= \frac{1}{4}\int_{r\geq\epsilon} \frac{|q(f)_{g}|^2}{\tr_h(f^* g) + 2 \sqrt{\det_h(f^* g)}}dA_h \label{eq:en-2}
\end{align}
One can see from eqref:eq:en-1 that if the quadratic differential of \( f \) vanishes on
\( \partial \Sigma \) then \( |q(f)_{\bar g}|^2 = O(r)^2 \) and the integral increases to
a finite limit as \( \epsilon \to 0 \). Meanwhile eqref:eq:en-2 shows that this limit,
which is the difference between the renormalised energy and renormalised area is
independent of the special bdf \( r \).
#+END_proposition

We remark that the two integrals only depend on the conformal class of \( h \) and the
determinators are sums of densities of energy and area of \( f \) under \( \bar g \) and \(
g \) respectively.

#+BEGIN_proof
It suffices to prove eqref:eq:en-2, which means, at any point \( P \) of \( \Sigma \)
\[
 \tr_h(f^*g)^2 - 4{\rm det}_{h}(f^*g) = \frac{1}{4}|q(f)_g|^2
\]
Choose a holomorphic coordinate \( x,y \) centered at \( P \), one has, with computation:
\[ 
q(f)_g = \left(\left|\frac{\partial f}{\partial x}\right|^2_g - \left|\frac{\partial f}{\partial y}\right|^2_g - 2i
\langle \frac{\partial f}{\partial x}, \frac{\partial f}{\partial y} \rangle_g\right)
dz\otimes dz\]
hence
\[
\frac{1}{4}\left|q(f)_g\right|^2 = (f^\alpha_x f^\beta_x g_{\alpha\beta} - f^\alpha_y f^\beta_y
g_{\alpha\beta})^2 + 4(f^\alpha_xf^\beta_y g_{\alpha\beta})^2
\]

Moreover
\[
 \tr_h(f^*g) = f^\alpha_x f^\beta_x g_{\alpha\beta} + f^\alpha_y f^\beta_y g_{\alpha\beta}  
\]
and
\[
 {\rm det}_h(f^*g) = f^\alpha_x f^\beta_x g_{\alpha\beta}f^\gamma_yf^\delta_y
g_{\gamma\delta}-f^\alpha_x f^\beta_y g_{\alpha\beta}f^\gamma_xf^\delta_y g_{\gamma\delta}
\]
The result follows.
#+END_proof


* Log term in energy: half-sphere in \( \mathbb{H}^3 \).
The following example concerns a compact surface (a half-sphere) in \( \mathbb{H}^3 \) (so
there is no subtlety of its boundary in Poincaré's \( \mathbb{H}^3 \) or
\(\mathbb{D}^3\)).

Let \( \mathbb{D}^2 \) be the unit disk coordinated by \( (s,\theta)\in [0,1)\times
[0,2\pi)  \) and \( \mathbb{H}^3 \) be the Poincaré half-space coordinated by \(
(x_0,r,\theta)\in (0,+\infty)\times [0,+\infty)\times [0,2\pi) \). Consider the map \( f:
\mathbb{D}^2 \longrightarrow \mathbb{H}^3 \) given by 
\[
 (s,\theta) \longmapsto \left( \frac{1-s^2}{1+s^2}, (\frac{2s}{1+s^2},\theta) \right)
\]
which is the totally geodesic imbedding of \( (\mathbb{D}^2,\text{Poincaré}) \) into \(
(\mathbb{H}^3,\text{Poincaré}) \). One can verify that if \( g = \frac{1}{x_0^2} (dx_0^2 +
dr^2 + r^2d\theta^2) \) is the Poincaré metric on \( \mathbb{H}^3 \) then
\[
 f^* g = \frac{4}{(1-s^2)^2} (ds^2 + s^2 d\theta^2)
\]
is the Poincaré metric on \( \mathbb{D}^2 \).

We will equip \( \mathbb{D}^2 \) with the following metric
\[
 g_A = dx^2 + dy^2 + 2A dxdy = (1+A\sin 2\theta) ds^2 + s^2 (1-A\sin 2\theta) d\theta^2 +
2As\cos 2\theta ds d\theta
\]
where \( A \) is a suitable smooth function on \( \mathbb{D}^2 \) with \( |A|< 1 \). We
will show that when \( A:=\frac{2s^2}{1+s^4} \) then there will be a \( \ln\epsilon \)
term in the energy of \( f: (\mathbb{D}^2,g_A) \longrightarrow (\mathbb{H}^3,
g=\text{Poincaré}) \).


#+BEGIN_proof
One can check that \( \det
(g_A) = s^2(1-A^2) \) and the contravariant metric is
\[
 (g_A)^{ij} = \frac{1}{s^2 (1-A^2)}\begin{bmatrix}s^2 (1-A\sin 2\theta) & -As\cos 2\theta\\-As\cos 2\theta &
1+A\sin 2\theta\end{bmatrix}
\]

The trace of the pullback metric \( f^*g \) under the metric \( g_A \) is
\[
 \tr_{g_A} (f^*g) = \frac{8}{(1-s^2)^2}.\frac{1}{1-A^2}
\]
Therefore
\[
E_\epsilon(f) := \int_{x_0\geq \epsilon} \tr_{g_A}(f^* g) \sqrt{|\det g_A|} ds d\theta = \int_{x_0\geq
\epsilon} \frac{8}{\sqrt{1-A^2}}.\frac{s}{(1-s^2)^2} ds d\theta
\]


Take \( A:= \frac{2s^2}{1+s^4} \) then \( \sqrt{1-A^2} = \frac{1-s^4}{1+s^4} \) and 
\[
E_\epsilon(f) = 8\pi \int_{y\leq y_{\max}} \frac{1+y^2}{1-y^2}.\frac{1}{(1-y)^2} dy
\]
where \( y=s^2 \) running from \( 0 \) to \( y_{\max}=\frac{1-\epsilon}{1+\epsilon} \).

By writing the rational function as
\[
 \frac{1+y^2}{(1-y^2)(1-y)^2} = -\frac{1}{2} .\frac{1}{(1-y)^2} + \frac{1}{(1-y)^3} +
\frac{1}{4}.\frac{1}{1+y} + \frac{1}{4}.\frac{1}{1-y},
\]
one sees that
\[
 E_\epsilon(f) = \frac{\pi}{\epsilon^2} + \frac{4\pi}{\epsilon} -2\pi \ln\epsilon - 5\pi.
\]
#+END_proof

Let us reuse the formula
\[
 E_\epsilon(f) = \int_{x\geq \epsilon} \frac{8}{\sqrt{1-A^2}} \frac{s}{(1-s^2)^2}dsd\theta
 = 8\pi\int_{z\geq z_{\min}} \frac{1}{B(z)} \frac{1}{z^2}dz
\]
where \( z = 1-s^2 \) running from \( z_{\min} = \frac{2\epsilon}{1+\epsilon} \) to \( 1
\) and \( B = \sqrt{1-A^2} \).

Let us assume that 
 - \( A \) is at least \( C^1 \) on \( z = 1-s^2 \),
 - \( A \) tends to \( 0 \) near the boundary circle, i.e. when \( z\to 0 \),
The second assumption is equivalent to \( B(z=0) = 1 \) and the first assumption at \( z=0
\) (given that the second holds) is equivalent to \( B'(z=0) = 0 \). So \( B = 1 + az^2 + O(z^3) \) 

Trying to integrate \( \frac{1}{z^2 (z-a)(z-b)(z-c)} \) when \( abc=1 \) and \( ab+bc+ca=0
\), one sees that there is no \( \ln z \) term (there may be \( \ln(z+\omega) \) with \(
\omega\ne 0 \) term though).

#+ATTR_HTML: :id rem:cond-A-bndry
#+BEGIN_remark
#+LATEX: \label{rem:cond-A-bndry}
So an appropriate condition to add (so that there is no \( \ln\epsilon \) term in the
energy) is that \( A\to 0 \) near the boundary circle, meaning that \( f \) is 
conformal at the boundary.
#+END_remark



* Log term in energy of \( f: \overline{\mathbb{H}^2} \longrightarrow \overline{\mathbb{H}^{n+1}} \).
Let \(\mathbb{H}^2 \) be coordinated by \( (t,s) \) with \( t>0,s\in \mathbb{R} \) and \( \mathbb{H}^{n+1} \) be cordinated by \( x> 0, y^1,\dots, y^n\in \mathbb{R} \).

Define \( f: \overline{\mathbb{H}^2} \longrightarrow \overline{\mathbb{H}^{n+1}} \) by
\[
(t,s) \mapsto \left(t+t^2, \gamma^i(s)\right)
\]
whose image is the vertical cylinder over the curve \( s \mapsto (\gamma^i(s)) \).

#+BEGIN_exampl
If \( n=2 \), one can take \( (y^1,y^2) := \left(\frac{2s}{s^2+1},\frac{s^2-1}{s^2+1}
\right)  \). Its image is the unit circle in \( \{x=0\} \), only filled once as \( s \)
varies in \( \mathbb{R} \).
#+END_exampl

Now that 
\[
 dx = (1+2t)dt,\quad dy^i = \dot \gamma^i ds,
\]
the pullback by \( f \) of Poincaré metric \( g = \frac{1}{x^2}(dx^2 + \sum d{y^i}^2) \) on \(
\mathbb{H}^{n+1} \) is
\[
 f^* g = \frac{1}{t^2 (1+t)^2} \left( (1+2t)^2 dt^2 + \sum \dot {\gamma^i}^2(s) ds^2 \right)
\]
Its trace w.r.t the Euclidean metric on the half 2-plane is
\[
 \tr f^* g = \frac{(1+2t)^2}{t^2(1+t)^2} + \frac{\varphi(s)}{t^2(1+t)^2}
\]
where \( \varphi \) only depends on \( s \) and can be replaced by \( a^2\varphi \) for
any constant \( a>0 \) when one modifies the boundary curve \( \gamma \to a\gamma \)).

Integrate by \( s\in \mathbb{R} \) and \( t \) in \( (t_{\min},1) \) (we can suppose
\(t\leq 1 \) since we are only interested in the energy near boundary, \( t_{\min} =
\frac{-1 + \sqrt{1+4\epsilon}}{2} = \epsilon + O(\epsilon^2) \)):

\[
 \int_t \frac{1}{t^2} + \frac{1}{(1+t)^2} + \frac{2}{t(1+t)} + \const(\varphi) \left(
 \frac{1}{t^2} - \frac{2}{t(1+t)} + \frac{1}{(1+t)^2} \right)
\]
where \( \const(\varphi) \) can be scaled up \( a^2 \) times when one replaces \( \gamma
 \) by \( a\gamma \). Choose \( a \) so that the term \( \frac{2}{t(1+t)} \) remains,
 which integrates to \( \log t_{\min} = \log(\epsilon) + O(\epsilon) \).


#+ATTR_HTML: :id rem:bndry-condition
#+BEGIN_remark
#+LATEX: \label{rem:bndry-condition}
It is clear that one needs a certain regularity of \( f \) at boundary of the initial
space so that the \( \log\epsilon \) term does not appear. The "Poincaré half-plane to
Poincaré disk" transform is only smooth and diffeomorphic in the interior. The boundary map
\( (y^1,y^2) := \left(\frac{2s}{s^2+1},\frac{s^2-1}{s^2+1} \right) \) in the example above
(\( n=2 \)) is the restriction on boundary of the half-plane-to-disk transform.
#+END_remark




* Commutative diagram revisited
** xypic and xyJax
To my knowledge, the only way to type commutative diagram on the web is to use ~xyJax~, a
third-party extension of ~MathJax~ that render diagram using ~xypic~. This is also how
[[https://stacks.math.columbia.edu/][Stacks Project]] was set up.

The syntax of ~xypic~ is almost the same as ~tikz-cd~, to a basic user the only difference
is how arrows are typed. I learn ~xypic~ syntax by rewriting a GUI editor for ~tikzcd~ by
[[https://tikzcd.yichuanshen.de][Yichuan Shen]] to output ~xypic~ code. [[https://darknmt.github.io/res/xypic-editor/][Here]] is the ~xypic~ version of the editor. I also
host a copy of the ~tikz-cd~ editor [[http://darknmt.github.io/res/tikzcd-editor][here]].

The configuration of ~xyJax~ or any third-party extension MathJax was not very easy for
 me, since it seems that MathJax CDN no longer hosts third-party extensions. So I have to
 host my own copy of ~xyJax~ and tell MathJax CDN to use it, as indicated in [[http://docs.mathjax.org/en/latest/options/ThirdParty.html][its
 documentation]]. Also, one also has to [[https://github.com/sonoisa/XyJax/blob/master/README.md][reconfig a path]] in ~xyJax~.

To config MathJax in org-mode, apropos ~org-html-mathjax-template~.

* LaTeX in Inkscape: Incompatibility between ~ghostscript~ and ~pstoedit~ <2018-03-30 Fri>
Since Ghostscript 9.22, certain flags (e.g. ~dREALLYDEALYBIND~) are deprecated and ~pstoedit~,
a piece of software that Inkscape uses to render LaTeX, remains unchanged since 2005. This
makes Inkscape users unable use LaTeX. Textext developers claims that they will switch to
~pdf2svg~ frontend in their version 0.8 to avoid this trouble with ~pstoedit~. Meanwhile,
the only solution seems to be downgrade ghostscript to 9.21 each time one uses Inkscape.
In ArchLinux, one can downgrade a package using ~pacman~: 

#+BEGIN_SRC bash
ls /var/cache/pacman/pkg/ | grep ghostscript
pacman -U /var/cache/pacman/pkg/package-old_version.pkg.tar.xz
#+END_SRC

or a AUR package called ~downgrade~

#+BEGIN_SRC bash
downgrade ghostscript
#+END_SRC

I had good experience with both of them (~pacman~ to downgrade ~php~ to be compatible
with ~nextcloud~, and ~downgrade~ for ghostscript)


The problem is well documented [[https://bbs.archlinux.org/viewtopic.php?id=224340][here]] and [[https://bitbucket.org/pitgarbe/textext/issues/48/ghostscript-still-bug-under-linux][here]].

* LaTeX indentation in org-mode <2018-02-20 Tue>
  I was told, in accordance with my experience, that we visually process text better if
  each line in a paragraph is approximately below 80 characters. This fact is also
  omnipresent on the internet, standardized tests, books, etc.. being among the
  fundamentals of web design (except wikipedia, that's why I use Wikiwand).

  In Emacs, the key binding ~M-q~ will execute the ~fill-paragraph~ function that
  automatically shrinks text and insert "soft" newlines to shorten line below a certain
  threshold. This function however does not respect the LaTeX structure, e.g. it inserts
  line break inside inline equation and merge display equation.
  format paragraph.

#+BEGIN_SRC org
  This is a long long long long long long long long long paragraph with equation \( 1+1 = 
  2+0=3-1=4-2 \) with an equation in display \[ 1+ 1 = 2\].
#+END_SRC

The problem has been noticed around the Internet [[https://emacs.stackexchange.com/questions/29122/prevent-fill-paragraph-from-breaking-latex-displayed-equations-in-org-mode][here]] and [[https://emacs.stackexchange.com/questions/34938/is-there-a-fill-paragraph-function-which-tries-to-not-break-subordinate-parenthe?rq=1][there]].  

Meanwhile AucTeX does not have this annoying problem. [[https://www.gnu.org/software/auctex/manual/auctex.html#index-LaTeX_002dfill_002dbreak_002dat_002dseparators][It turns out]] that AUCTeX maps the
~M-q~ key to a different function, called ~LaTeX-fill-paragraph~. So the temporary fix is
to load ~latex.el~ in org-mode and maps ~M-q~ to ~LaTeX-fill-paragraph~

#+BEGIN_SRC org
(load "latex.el")
(global-set-key "\M-q" 'LaTeX-fill-paragraph)
#+END_SRC

* A (decent) map of mathematics <2017-10-17 Tue>

  I saw this [[https://www.flickr.com/photos/95869671@N08/32264483720][map of mathematics]] somewhere on YouTube and then again on the door of
  someone's office at the I2M. Although this map may help popularise mathematics, it
  should raise an eyebrow of a serious math student (or even an attentive highschool
  student, as for example 1 was listed among prime numbers in an earlier version of this
  map).

  For a decent map of Mathematics, made by a mathematician, see [[http://www.math.unm.edu/~buium/mapp.pdf][this]].

* My 2016-2017 internship <2017-07-31 Mon> 

I have just recently finished my Stage3A at [[https://www.i2m.univ-amu.fr/][Institut de Mathématiques de Marseille]]. It is
also in this period that I start this blog. The memoire can be founded here [[[../res/Stage2017.pdf][PDF]]]
