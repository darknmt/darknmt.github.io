!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){"use strict";function e(){}function n(t,n){var o,r,i,a,l=N;for(a=arguments.length;a-- >2;)T.push(arguments[a]);for(n&&null!=n.children&&(T.length||T.push(n.children),delete n.children);T.length;)if((r=T.pop())&&void 0!==r.pop)for(a=r.length;a--;)T.push(r[a]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r+="":"string"!=typeof r&&(i=!1)),i&&o?l[l.length-1]+=r:l===N?l=[r]:l.push(r),o=i;var u=new e;return u.nodeName=t,u.children=l,u.attributes=null==n?void 0:n,u.key=null==n?void 0:n.key,void 0!==A.vnode&&A.vnode(u),u}function r(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){return n(t.nodeName,r(r({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}function a(t){!t.__d&&(t.__d=!0)&&1==B.push(t)&&(A.debounceRendering||L)(l)}function l(){var t,e=B;for(B=[];t=e.pop();)t.__d&&S(t)}function u(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&s(t,e.nodeName):n||t._componentConstructor===e.nodeName}function s(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function c(t){var e=r({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===e[o]&&(e[o]=n[o]);return e}function d(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.__n=t,n}function p(t){var e=t.parentNode;e&&e.removeChild(t)}function f(t,e,n,r,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),r&&r(t);else if("class"!==e||i)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof n||(t.style.cssText=r||""),r&&"object"==(void 0===r?"undefined":o(r))){if("string"!=typeof n)for(var a in n)a in r||(t.style[a]="");for(var a in r)t.style[a]="number"==typeof r[a]&&!1===I.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var l=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,b,l):t.removeEventListener(e,b,l),(t.__l||(t.__l={}))[e]=r}else if("list"!==e&&"type"!==e&&!i&&e in t)h(t,e,null==r?"":r),null!=r&&!1!==r||t.removeAttribute(e);else{var u=i&&e!==(e=e.replace(/^xlink\:?/,""));null==r||!1===r?u?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof r&&(u?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function h(t,e,n){try{t[e]=n}catch(t){}}function b(t){return this.__l[t.type](A.event&&A.event(t)||t)}function m(){for(var t;t=H.pop();)A.afterMount&&A.afterMount(t),t.componentDidMount&&t.componentDidMount()}function v(t,e,n,o,r,i){R++||(U=null!=r&&void 0!==r.ownerSVGElement,z=null!=t&&!("__preactattr_"in t));var a=y(t,e,n,o,i);return r&&a.parentNode!==r&&r.appendChild(a),--R||(z=!1,i||m()),a}function y(t,e,n,o,r){var i=t,a=U;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),_(t,!0))),i.__preactattr_=!0,i;var l=e.nodeName;if("function"==typeof l)return E(t,e,n,o);if(U="svg"===l||"foreignObject"!==l&&U,l+="",(!t||!s(t,l))&&(i=d(l,U),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),_(t,!0)}var u=i.firstChild,c=i.__preactattr_,p=e.children;if(null==c){c=i.__preactattr_={};for(var f=i.attributes,h=f.length;h--;)c[f[h].name]=f[h].value}return!z&&p&&1===p.length&&"string"==typeof p[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=p[0]&&(u.nodeValue=p[0]):(p&&p.length||null!=u)&&g(i,p,n,o,z||null!=c.dangerouslySetInnerHTML),w(i,e.attributes,c),U=a,i}function g(t,e,n,o,r){var i,a,l,s,c,d=t.childNodes,f=[],h={},b=0,m=0,v=d.length,g=0,k=e?e.length:0;if(0!==v)for(var w=0;w<v;w++){var C=d[w],O=C.__preactattr_,j=k&&O?C._component?C._component.__k:O.key:null;null!=j?(b++,h[j]=C):(O||(void 0!==C.splitText?!r||C.nodeValue.trim():r))&&(f[g++]=C)}if(0!==k)for(var w=0;w<k;w++){s=e[w],c=null;var j=s.key;if(null!=j)b&&void 0!==h[j]&&(c=h[j],h[j]=void 0,b--);else if(!c&&m<g)for(i=m;i<g;i++)if(void 0!==f[i]&&u(a=f[i],s,r)){c=a,f[i]=void 0,i===g-1&&g--,i===m&&m++;break}c=y(c,s,n,o),l=d[w],c&&c!==t&&c!==l&&(null==l?t.appendChild(c):c===l.nextSibling?p(l):t.insertBefore(c,l))}if(b)for(var w in h)void 0!==h[w]&&_(h[w],!1);for(;m<=g;)void 0!==(c=f[g--])&&_(c,!1)}function _(t,e){var n=t._component;n?x(n):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||p(t),k(t))}function k(t){for(t=t.lastChild;t;){var e=t.previousSibling;_(t,!0),t=e}}function w(t,e,n){var o;for(o in n)e&&null!=e[o]||null==n[o]||f(t,o,n[o],n[o]=void 0,U);for(o in e)"children"===o||"innerHTML"===o||o in n&&e[o]===("value"===o||"checked"===o?t[o]:n[o])||f(t,o,n[o],n[o]=e[o],U)}function C(t){var e=t.constructor.name;(J[e]||(J[e]=[])).push(t)}function O(t,e,n){var o,r=J[t.name];if(t.prototype&&t.prototype.render?(o=new t(e,n),M.call(o,e,n)):(o=new M(e,n),o.constructor=t,o.render=j),r)for(var i=r.length;i--;)if(r[i].constructor===t){o.__b=r[i].__b,r.splice(i,1);break}return o}function j(t,e,n){return this.constructor(t,n)}function P(t,e,n,o,r){t.__x||(t.__x=!0,(t.__r=e.ref)&&delete e.ref,(t.__k=e.key)&&delete e.key,!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,o),o&&o!==t.context&&(t.__c||(t.__c=t.context),t.context=o),t.__p||(t.__p=t.props),t.props=e,t.__x=!1,0!==n&&(1!==n&&!1===A.syncComponentUpdates&&t.base?a(t):S(t,1,r)),t.__r&&t.__r(t))}function S(t,e,n,o){if(!t.__x){var i,a,l,u=t.props,s=t.state,d=t.context,p=t.__p||u,f=t.__s||s,h=t.__c||d,b=t.base,y=t.__b,g=b||y,k=t._component,w=!1;if(b&&(t.props=p,t.state=f,t.context=h,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(u,s,d)?w=!0:t.componentWillUpdate&&t.componentWillUpdate(u,s,d),t.props=u,t.state=s,t.context=d),t.__p=t.__s=t.__c=t.__b=null,t.__d=!1,!w){i=t.render(u,s,d),t.getChildContext&&(d=r(r({},d),t.getChildContext()));var C,j,E=i&&i.nodeName;if("function"==typeof E){var M=c(i);a=k,a&&a.constructor===E&&M.key==a.__k?P(a,M,1,d,!1):(C=a,t._component=a=O(E,M,d),a.__b=a.__b||y,a.__u=t,P(a,M,0,d,!1),S(a,1,n,!0)),j=a.base}else l=g,C=k,C&&(l=t._component=null),(g||1===e)&&(l&&(l._component=null),j=v(l,i,d,n||!b,g&&g.parentNode,!0));if(g&&j!==g&&a!==k){var D=g.parentNode;D&&j!==D&&(D.replaceChild(j,g),C||(g._component=null,_(g,!1)))}if(C&&x(C),t.base=j,j&&!o){for(var T=t,N=t;N=N.__u;)(T=N).base=j;j._component=T,j._componentConstructor=T.constructor}}if(!b||n?H.unshift(t):w||(t.componentDidUpdate&&t.componentDidUpdate(p,f,h),A.afterUpdate&&A.afterUpdate(t)),null!=t.__h)for(;t.__h.length;)t.__h.pop().call(t);R||o||m()}}function E(t,e,n,o){for(var r=t&&t._component,i=r,a=t,l=r&&t._componentConstructor===e.nodeName,u=l,s=c(e);r&&!u&&(r=r.__u);)u=r.constructor===e.nodeName;return r&&u&&(!o||r._component)?(P(r,s,3,n,o),t=r.base):(i&&!l&&(x(i),t=a=null),r=O(e.nodeName,s,n),t&&!r.__b&&(r.__b=t,a=null),P(r,s,1,n,o),t=r.base,a&&t!==a&&(a._component=null,_(a,!1))),t}function x(t){A.beforeUnmount&&A.beforeUnmount(t);var e=t.base;t.__x=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?x(n):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.__b=e,p(e),C(t),k(e)),t.__r&&t.__r(null)}function M(t,e){this.__d=!0,this.context=e,this.props=t,this.state=this.state||{}}function D(t,e,n){return v(n,t,{},!1,e,!1)}var A={},T=[],N=[],L="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,I=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,B=[],H=[],R=0,U=!1,z=!1,J={};r(M.prototype,{setState:function(t,e){var n=this.state;this.__s||(this.__s=r({},n)),r(n,"function"==typeof t?t(n,this.props):t),e&&(this.__h=this.__h||[]).push(e),a(this)},forceUpdate:function(t){t&&(this.__h=this.__h||[]).push(t),S(this,2)},render:function(){}});var G={h:n,createElement:n,cloneElement:i,Component:M,render:D,rerender:l,options:A};t.exports=G}()},function(t,e,n){var o,r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function a(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=void 0===n?"undefined":i(n);if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n))t.push(a.apply(null,n));else if("object"===o)for(var r in n)l.call(n,r)&&n[r]&&t.push(r)}}return t.join(" ")}var l={}.hasOwnProperty;void 0!==t&&t.exports?t.exports=a:"object"===i(n(4))&&n(4)?(o=[],void 0!==(r=function(){return a}.apply(e,o))&&(t.exports=r)):window.classNames=a}()},function(t,e,n){"use strict";function o(){return(s++).toString()}function r(t,e,n){return Math.max(t,Math.min(e,n))}function i(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})}function a(t,e){return t.map(function(t,n){return t+e[n]})}function l(t,e){return e.map(function(e){return t*e})}function u(t,e){return t.map(function(t,n){return t-e[n]})}e.f=o,e.e=r,e.b=i,e.a=a,e.c=l,e.d=u;var s=0},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){var n=d(t,2),o=n[0],r=n[1],i=d(e,2),a=i[0],l=i[1],u=a-o,s=l-r,c=[u,s].map(Math.sign),p=[["l","","r"],["u","","d"]];return[u,s].map(function(t,e){return p[e][c[e]+1].repeat(Math.abs(t))}).join("")}function u(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==t.attributes.direction)return"";var n=['"',",","]"],o=t.attributes.labelPosition||"left";e===!t.attributes.alt&&"inside"!==o&&(o="left"===o?"right":"left");var r={left:"^",right:"_",inside:"|-"}[o],i=null!=t.attributes.value&&n.some(function(e){return t.attributes.value.includes(e)})?["{","}"]:["",""],a=d(i,2),l=a[0],u=a[1],s=null!=t.attributes.value?""+r+l+t.attributes.value+u:"",c=null!=t.attributes.args?t.attributes.args.join(""):"";return c=""!=c?"@{"+t.attributes.args.join("")+"}":"","\\ar"+t.attributes.xybend+c+"["+t.attributes.direction+"]"+s}n.d(e,"c",function(){return p}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return b});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),d=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){},f=function(){},h=function(){function t(e){a(this,t),this.props=e}return c(t,[{key:"render",value:function(){}}]),t}(),b=function(t){function e(t){a(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function t(e){return e.children.reduce(function(e,n){return null==n?e:([p,f].includes(n.nodeName)?e.push(n):e.push.apply(e,o(t(n))),e)},[])}(n.props);return n.nodes=i.reduce(function(t,e){return e.nodeName===p&&e.key&&e.attributes.position?(e.key in t?t[e.key]=s({},t[e.key],{attributes:s({},t[e.key].attributes,e.attributes)}):t[e.key]=e,t):t},{}),n.edges=i.reduce(function(e,o){if(o.nodeName!==f||!o.attributes.from||!o.attributes.to)return e;var r=t.co?["to","from"]:["from","to"],i=d(r,2),a=i[0],u=i[1];return o.attributes[a]in e||(e[o.attributes[a]]=[]),e[o.attributes[a]].push(s({},o,{attributes:s({},o.attributes,{direction:l(n.nodes[o.attributes[a]].attributes.position,n.nodes[o.attributes[u]].attributes.position)})})),e},{}),n}return i(e,t),c(e,[{key:"getBounds",value:function(){var t=this;return Object.keys(this.nodes).map(function(e){return t.nodes[e].attributes.position}).reduce(function(t,e){var n=d(t,4),o=n[0],r=n[1],i=n[2],a=n[3],l=d(e,2),u=l[0],s=l[1];return[Math.min(o,u),Math.max(r,u),Math.min(i,s),Math.max(a,s)]},[1/0,-1/0,1/0,-1/0])}},{key:"toArray",value:function(){var t=this.getBounds(),e=d(t,4),n=e[0],o=e[1],r=e[2],i=e[3];if(n>o||r>i)return[];var a=Array(i-r+1).fill().map(function(t){return Array(o-n+1).fill(null)}),l=!0,u=!1,s=void 0;try{for(var c,p=Object.keys(this.nodes)[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var f=c.value,h=d(this.nodes[f].attributes.position,2),b=h[0];a[h[1]-r][b-n]={node:this.nodes[f],edges:this.edges[f]||[]}}}catch(t){u=!0,s=t}finally{try{!l&&p.return&&p.return()}finally{if(u)throw s}}return a}},{key:"render",value:function(){var t=this;null==this.props.options||this.props.options;return["\\xymatrix{",this.toArray().map(function(e){return e.map(function(e){return null==e?"":[e.node.attributes.value||"{}"].concat(o(e.edges.map(function(e){return u(e,t.props.co)}))).join(" ")}).join(" & ")}).join(" \\\\\n"),"}"].join("\n")}}]),e}(h)},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return c}),n.d(e,"b",function(){return d});var a=n(0),l=(n.n(a),n(1)),u=n.n(l),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(t){function e(){var t,n,i,a;o(this,e);for(var l=arguments.length,u=Array(l),s=0;s<l;s++)u[s]=arguments[s];return n=i=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),i.handleClick=function(t){t.preventDefault();var e=i.props.onClick;(void 0===e?function(){}:e)(t)},a=n,r(i,a)}return i(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.checked,n=t.disabled,o=t.icon,r=t.name;return Object(a.h)("li",{class:u()("button",this.props.class,{checked:e,disabled:n}),title:r},Object(a.h)("a",{href:"#",onClick:this.handleClick},Object(a.h)("img",{style:{backgroundImage:"url('"+o+"')"},src:"./img/tools/blank.svg",alt:r})))}}]),e}(a.Component),d=function(){return Object(a.h)("li",{class:"separator"},"Separator")},p=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),s(e,[{key:"render",value:function(){return Object(a.h)("section",{class:u()("toolbox",this.props.class),id:this.props.id},Object(a.h)("ul",null,this.props.children))}}]),e}(a.Component);e.c=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=(n.n(o),n(7));MathJax.Hub.processSectionDelay=0,MathJax.Hub.processUpdateDelay=0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,showMathMenu:!1,errorSettings:{message:[""]}}),Object(o.render)(Object(o.h)(r.a,null),document.body)},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=n(0),u=(n.n(l),n(8)),s=n.n(u),c=n(9),d=n(13),p=n(17),f=n(5),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),m=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(t.copyCode=function(){if(!t.state.confirmCodeCopy){var e=c.c(t.state.diagram);s()(e)?(t.setState({confirmCodeCopy:!0}),setTimeout(function(){return t.setState({confirmCodeCopy:!1})},1e3)):prompt("Copy code down below:",e.replace(/\n/g," "))}},t.copyLink=function(){if(!t.state.confirmLinkCopy){var e=c.b(t.state.diagram),n=window.location.href.split("#")[0],o=n+"#"+e;window.history.replaceState(null,null,"#"+e);s()(o)?(t.setState({confirmLinkCopy:!0}),setTimeout(function(){return t.setState({confirmLinkCopy:!1})},1e3)):prompt("Copy link down below:",o)}},t.moveInHistory=function(e){null!=t.history[t.historyPointer+e]&&(t.historyPointer+=e,t.setState({diagram:t.history[t.historyPointer].diagram,selectedEdge:null}))},t.undo=function(){return t.moveInHistory(-1)},t.redo=function(){return t.moveInHistory(1)},t.handleDataChange=function(e){var n=t.state.diagram.edges.length+1===e.data.edges.length,o={diagram:e.data,time:Date.now()};(t.historyPointer<t.history.length-1||Date.now()-t.history[t.historyPointer].time>500)&&t.history[t.historyPointer].diagram!==e.data?(t.history.splice(t.historyPointer+1,t.history.length,o),t.historyPointer=t.history.length-1):t.history[t.historyPointer]=o,t.setState({diagram:e.data,selectedEdge:n?e.data.edges.length-1:t.state.selectedEdge})},t.handleEdgeClick=function(e){t.setState({selectedEdge:t.state.selectedEdge===e.edge?null:e.edge})},t.handleToolClick=function(e){return null==t.toolClickHandlersCache&&(t.toolClickHandlersCache={}),null==t.toolClickHandlersCache[e]&&(t.toolClickHandlersCache[e]=function(n){t.setState({tool:e,selectedEdge:null})}),t.toolClickHandlersCache[e]},t.handleAboutClick=function(){var t=Object(l.render)(Object(l.h)("a",{href:"https://github.com/darknmt/xypic-editor",target:"_blank"}),document.body);t.click(),t.remove()},t.handleEdgeChange=function(e){var n=[].concat(o(t.state.diagram.edges));n[t.state.selectedEdge]=h({},n[t.state.selectedEdge],e.data),null!=e.data.value&&""===e.data.value.trim()&&delete n[t.state.selectedEdge].value,t.handleDataChange({data:{nodes:t.state.diagram.nodes,edges:n}})},t.handleEdgeRemoveClick=function(){var e=t.state.diagram.edges.filter(function(e,n){return n!==t.state.selectedEdge}),n=t.state.diagram.nodes.filter(function(t){return""!==t.value.trim()||e.some(function(e){return e.from===t.id||e.to===t.id})});t.handleDataChange({data:{nodes:n,edges:e}}),t.setState({selectedEdge:null})},t.state={tool:"pan",cellSize:130,selectedEdge:null,confirmCodeCopy:!1,confirmLinkCopy:!1,diagram:{nodes:[],edges:[]}},window.location.hash.length>0)try{t.state.diagram=c.a(window.location.hash.slice(1))}catch(t){alert("Invalid URL encoding")}return t.history=[{diagram:t.state.diagram,time:Date.now()}],t.historyPointer=0,t}return a(e,t),b(e,[{key:"componentDidMount",value:function(){var t=this,e={17:"arrow",32:"pan"};document.addEventListener("keydown",function(n){if(null!=e[n.keyCode]){if(null!=t.prevTool)return;t.prevTool=t.state.tool,t.setState({tool:e[n.keyCode]})}}),document.addEventListener("keyup",function(n){if(Object.keys(e).includes(n.keyCode.toString())){if(null==t.prevTool)return;t.setState({tool:t.prevTool}),t.prevTool=null}}),document.addEventListener("keyup",function(e){27===e.keyCode&&t.setState({selectedEdge:null})}),window.addEventListener("beforeunload",function(t){var e="Do you really want to leave?";return t.returnValue=e,e})}},{key:"render",value:function(){return Object(l.h)("div",{id:"root"},Object(l.h)(d.a,{cellSize:this.state.cellSize,data:this.state.diagram,mode:this.state.tool,selectedEdge:this.state.selectedEdge,onDataChange:this.handleDataChange,onEdgeClick:this.handleEdgeClick}),Object(l.h)(p.a,{edgeId:this.state.selectedEdge,show:null!=this.state.selectedEdge,data:this.state.diagram.edges[this.state.selectedEdge],onChange:this.handleEdgeChange,onRemoveClick:this.handleEdgeRemoveClick}),Object(l.h)(f.c,{id:"toolbox"},Object(l.h)(f.a,{checked:"pan"===this.state.tool,icon:"./img/tools/pan.svg",name:"Pan Tool (Space)",onClick:this.handleToolClick("pan")}),Object(l.h)(f.a,{checked:"arrow"===this.state.tool,icon:"./img/tools/arrow.svg",name:"Arrow Tool (Ctrl)",onClick:this.handleToolClick("arrow")}),Object(l.h)(f.b,null),Object(l.h)(f.a,{disabled:null==this.history[this.historyPointer-1],icon:"./img/tools/undo.svg",name:"Undo",onClick:this.undo}),Object(l.h)(f.a,{disabled:null==this.history[this.historyPointer+1],icon:"./img/tools/redo.svg",name:"Redo",onClick:this.redo}),Object(l.h)(f.b,null),Object(l.h)(f.a,{icon:"./img/tools/"+(this.state.confirmCodeCopy?"tick":"code")+".svg",name:"Copy Diagram Code",onClick:this.copyCode}),Object(l.h)(f.a,{icon:"./img/tools/"+(this.state.confirmLinkCopy?"tick":"link")+".svg",name:"Copy Diagram Permalink",onClick:this.copyLink}),Object(l.h)(f.b,null),Object(l.h)(f.a,{icon:"./img/tools/about.svg",name:"GitHub Repository",onClick:this.handleAboutClick})))}}]),e}(l.Component);e.a=m},function(t,e,n){"use strict";t.exports=function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.contain="strict",e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="12pt";var n=getSelection(),o=!1;n.rangeCount>0&&(o=n.getRangeAt(0)),document.body.appendChild(e),e.select(),e.selectionStart=0,e.selectionEnd=t.length;var r=!1;try{r=document.execCommand("copy")}catch(t){}return document.body.removeChild(e),o&&(n.removeAllRanges(),n.addRange(o)),r}},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){var e=[0,1].map(function(e){return t.nodes.reduce(function(t,n){return Math.min(t,n.position[e])},1/0)});return JSON.stringify({nodes:t.nodes.map(function(t){return d({},t,{id:void 0,position:t.position.map(function(t,n){return t-e[n]})})}),edges:t.edges.map(function(e){return d({},e,{from:t.nodes.findIndex(function(t){return t.id===e.from}),to:t.nodes.findIndex(function(t){return t.id===e.to})})})})}function i(t){var e=JSON.parse(t),n=e.nodes.map(function(t){return d({},t,{id:c.f()})});return{nodes:n,edges:e.edges.map(function(t){return d({},t,{from:n[t.from].id,to:n[t.to].id})})}}function a(t){return btoa(r(t))}function l(t){return i(atob(t))}function u(t){return Object(s.e)(Object(s.d)(s.a,null,t.nodes.map(function(t,e){return Object(s.d)(s.c,{key:t.id,position:t.position,value:t.value})}),t.edges.map(function(t){return[Object(s.d)(s.b,{from:t.from,to:t.to,value:t.value,labelPosition:t.labelPosition,args:[].concat(o([t.tail,t.line,t.head].map(function(t,e){return{none:["","-",""][e],default:["","-",">"][e],null:["","-",">"][e],undefined:["","-",">"][e],harpoon:"^>",harpoonalt:"_>'",hook:"^{(}",hookalt:"_{(}",mapsto:"|",tail:")",twoheads:">>",dashed:"--",dotted:".",solid:"-",double:"="}[t]}))).filter(function(t){return null!=t}),xybend:t.bend>0?"@/^"+{30:"",49:"1pc",60:"1.5pc",67:"2pc",71:"2.5pc",74:"3pc",76:"3.5pc",78:"4pc",79:"4.5pc",80:"5pc"}[t.bend]+"/":t.bend<0?"@/_"+{30:"",49:"1pc",60:"1.5pc",67:"2pc",71:"2.5pc",74:"3pc",76:"3.5pc",78:"4pc",79:"4.5pc",80:"5pc"}[-t.bend]+"/":""})]})))}e.b=a,e.a=l,e.c=u;var s=n(10),c=n(2),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}},function(t,e,n){"use strict";var o=n(11),r=n(12),i=n(3);n.d(e,"d",function(){return o.a}),n.d(e,"e",function(){return r.a}),n.d(e,"a",function(){return i.a}),n.d(e,"c",function(){return i.c}),n.d(e,"b",function(){return i.b})},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return{nodeName:t,attributes:e||{},key:e&&e.key,children:function t(e){return e.reduce(function(e,n){return n instanceof Array?e.push.apply(e,o(t(n))):e.push(n),e},[])}(r)}}e.a=r},function(t,e,n){"use strict";function o(t){if(null==t)return null;if(![a.a,a.c,a.b].includes(t.nodeName)){var e=l({},t.attributes,{children:t.children});return o("render"in t.nodeName.prototype?new t.nodeName(e).render():t.nodeName(e))}return l({},t,{children:t.children.map(function(t){return o(t)})})}function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o(t);return null==n||n.nodeName!==a.a?null:new a.a(l({},n.attributes,{co:e!==!!n.attributes.co,children:n.children}))}function i(t){return r(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]).render()}e.a=i;var a=n(3),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(0),s=(n.n(u),n(1)),c=n.n(s),d=n(2),p=n(14),f=n(15),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},b=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),v=function(t){function e(t){i(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleNodeMouseDown=function(t){if(0===t.button){var e=n.props.cellSize,o=n.state.cameraPosition,r=[t.clientX,t.clientY].map(function(t,n){return Math.floor((t+o[n])/e)}),i=n.props.data.nodes.findIndex(function(t){return d.b(t.position,r)}),a=n.props.data.nodes[i];n.mouseDown={evt:t,position:r,nodeIndex:i,node:a,mode:n.props.mode}}},n.handleNodeGrabberMouseDown=function(t){if(0===t.button){t.stopPropagation();var e=t.position,o=n.props.data.nodes.findIndex(function(t){return d.b(t.position,e)}),r=n.props.data.nodes[o];n.mouseDown={evt:t,position:e,nodeIndex:o,node:r,mode:"move"}}},n.handleNodeMouseUp=function(t){if(null!=n.mouseDown){var e=n.mouseDown.evt;if(t.clientX===e.clientX&&t.clientY===e.clientY){var o=n.mouseDown.position;n.setState({editPosition:o})}}},n.handleNodeSubmit=function(){n.setState({editPosition:[null,null]})},n.handleNodeChange=function(t){var e=n.props.onDataChange,o=void 0===e?function(){}:e,i=[].concat(r(n.props.data.nodes)),a=i.findIndex(function(e){return d.b(e.position,t.position)});if(a<0)""!==t.value.trim()&&i.push({id:d.f(),position:t.position,value:t.value});else{var l=i[a].id;if(i[a]={id:l,position:[].concat(r(t.position)),value:t.value},""===t.value.trim()){n.props.data.edges.find(function(t){return t.from===l||t.to===l})||(i[a]=null)}}o({data:{nodes:i.filter(function(t){return null!=t}),edges:n.props.data.edges}})},n.handleEdgeClick=function(t){return null==n.edgeClickHandlersCache&&(n.edgeClickHandlersCache={}),null==n.edgeClickHandlersCache[t]&&(n.edgeClickHandlersCache[t]=function(e){var o=n.props.onEdgeClick,r=void 0===o?function(){}:o;e.edge=t,r(e)}),n.edgeClickHandlersCache[t]},n.state={width:null,height:null,cameraPosition:Array(2).fill(Math.round(-t.cellSize/2)),editPosition:[null,null],phantomEdge:null},n}return l(e,t),m(e,[{key:"componentDidMount",value:function(){var t=this;this.updateSize(),window.addEventListener("resize",function(){return t.updateSize()}),document.addEventListener("mouseup",function(){t.mouseDown=null;var e=t.state.phantomEdge;if(null!=e){if(!d.b(e.from,e.to)){var n=[].concat(r(t.props.data.nodes)),o=[e.from,e.to].map(function(t){return n.find(function(e){return d.b(e.position,t)})}),i=b(o,2),a=i[0],l=i[1];null==a&&n.push(a={id:d.f(),position:e.from,value:""}),null==l&&n.push(l={id:d.f(),position:e.to,value:""});var u=[].concat(r(t.props.data.edges),[{from:a.id,to:l.id}]),s=t.props.onDataChange;(void 0===s?function(){}:s)({data:{nodes:n,edges:u}})}t.setState({phantomEdge:null})}}),document.addEventListener("keyup",function(e){27===e.keyCode&&(e.stopPropagation(),t.setState({editPosition:[null,null]}))}),document.addEventListener("mousemove",function(e){if(null!=t.mouseDown){e.preventDefault();var n=t.props.cellSize,o=t.state.cameraPosition,r=[e.clientX,e.clientY].map(function(t,e){return Math.floor((t+o[e])/n)});if("pan"===t.mouseDown.mode){var i=e.movementX,a=e.movementY;t.setState({cameraPosition:d.d(o,[i,a])})}else if("move"===t.mouseDown.mode){var l=t.mouseDown.nodeIndex;if(l<0)return;var u=t.props.data.nodes.find(function(t){return d.b(t.position,r)});if(null!=u)return;var s=t.props.onDataChange,c=void 0===s?function(){}:s;c({data:{nodes:t.props.data.nodes.map(function(t,e){return e!==l?t:h({},t,{position:r})}),edges:t.props.data.edges}})}else if("arrow"===t.mouseDown.mode){var p=t.mouseDown.position,f=r;if(null!=t.state.phantomEdge&&d.b(p,t.state.phantomEdge.from)&&d.b(f,t.state.phantomEdge.to))return;t.setState({phantomEdge:{from:p,to:f}})}}})}},{key:"updateSize",value:function(){var t=this.element.getBoundingClientRect(),e=t.width,n=t.height;this.setState({width:e,height:n})}},{key:"render",value:function(){var t=this;if(null==this.state.width)return Object(u.h)("section",{ref:function(e){return t.element=e},id:"grid"});var e=this.props.cellSize,n=[this.state.width,this.state.height],r=this.state.cameraPosition.map(function(t){return Math.floor(t/e)}),i=b(r,2),a=i[0],l=i[1],s=this.state.cameraPosition.map(function(t,o){return Math.floor((t+n[o])/e)}),h=b(s,2),m=h[0],v=h[1],y=m-a+1,g=v-l+1,_=d.d(d.c(e,[a,l]),this.state.cameraPosition),k=b(_,2),w=k[0],C=k[1];return Object(u.h)("section",{ref:function(e){return t.element=e},id:"grid",class:c()(o({},this.props.mode,!0))},Object(u.h)("ol",{style:{gridTemplateColumns:"repeat("+y+", "+e+"px)",gridTemplateRows:"repeat("+g+", "+e+"px)",left:w,top:C,width:y*e,height:g*e},onMouseDown:this.handleNodeMouseDown,onMouseUp:this.handleNodeMouseUp},Array(g).fill().map(function(n,o){return Array(y).fill().map(function(n,r){return function(n){return Object(u.h)(p.a,{key:n.join(","),position:n,size:e,edit:d.b(n,t.state.editPosition),value:function(t){return t&&t.value}(t.props.data.nodes.find(function(t){return d.b(t.position,n)})),onGrabberMouseDown:t.handleNodeGrabberMouseDown,onSubmit:t.handleNodeSubmit,onChange:t.handleNodeChange})}([r+a,o+l])})})),Object(u.h)("ul",{style:{left:-this.state.cameraPosition[0],top:-this.state.cameraPosition[1]}},this.props.data.edges.map(function(n,o){return Object(u.h)(f.a,{cellSize:e,id:o.toString(),from:t.props.data.nodes.find(function(t){return t.id===n.from}).position,to:t.props.data.nodes.find(function(t){return t.id===n.to}).position,selected:t.props.selectedEdge===o,bend:n.bend,tail:n.tail,line:n.line,head:n.head,value:n.value,labelPosition:n.labelPosition,onClick:t.handleEdgeClick(o)})}),this.state.phantomEdge&&Object(u.h)(f.a,{cellSize:e,phantom:!0,from:this.state.phantomEdge.from,to:this.state.phantomEdge.to})))}}]),e}(u.Component);e.a=v},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=(n.n(a),n(1)),u=n.n(l),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(t){function e(){var t,n,i,a;o(this,e);for(var l=arguments.length,u=Array(l),s=0;s<l;s++)u[s]=arguments[s];return n=i=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),i.handleGrabberMouseDown=function(t){var e=i.props.onGrabberMouseDown,n=void 0===e?function(){}:e;t.position=i.props.position,n(t)},i.handleGrabberDragStart=function(t){t.preventDefault()},i.handleEditSubmit=function(t){t.preventDefault();var e=i.props.onSubmit;(void 0===e?function(){}:e)(t)},i.handleInputBlur=function(t){i.handleEditSubmit(t)},i.stopPropagation=function(t){t.stopPropagation()},i.handleInputChange=function(t){var e=i.props.onChange;(void 0===e?function(){}:e)({position:i.props.position,value:t.currentTarget.value})},a=n,r(i,a)}return i(e,t),s(e,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"shouldComponentUpdate",value:function(t){return t.value!==this.props.value||t.edit!==this.props.edit}},{key:"componentDidUpdate",value:function(t){var e=!0,n=!1,o=void 0;try{for(var r,i=this.valueElement.querySelectorAll(['span[id^="MathJax"]',".MathJax_Preview","script"].join(", "))[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.remove()}}catch(t){n=!0,o=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw o}}this.props.value&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.valueElement]),null!=this.inputElement&&t.edit!==this.props.edit&&this.inputElement.select()}},{key:"render",value:function(){var t=this;return Object(a.h)("li",{class:u()("grid-cell",{edit:this.props.edit}),"data-position":this.props.position.join(",")},Object(a.h)("img",{class:"grabber",src:"./img/grabber.svg",onMouseDown:this.handleGrabberMouseDown,onDragStart:this.handleGrabberDragStart}),Object(a.h)("div",{class:"value",ref:function(e){return t.valueElement=e}},this.props.value?"\\("+this.props.value+"\\)":Object(a.h)("span",{class:"hide"},"_")),this.props.edit&&Object(a.h)("form",{class:"edit",onSubmit:this.handleEditSubmit},Object(a.h)("input",{ref:function(e){return t.inputElement=e},type:"text",value:this.props.value,onBlur:this.handleInputBlur,onInput:this.handleInputChange,onMouseDown:this.stopPropagation,onKeyDown:this.stopPropagation})))}}]),e}(a.Component);e.a=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),l=(n.n(a),n(1)),u=n.n(l),s=n(2),c=n(16),d=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),f=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={labelX:"50%",labelY:0,startPoint:t.from.map(function(e){return e*t.cellSize+t.cellSize/2}),endPoint:t.to.map(function(e){return e*t.cellSize+t.cellSize/2})},n}return i(e,t),p(e,[{key:"componentDidMount",value:function(){this.componentDidUpdate(),this.componentWillReceiveProps()}},{key:"shouldComponentUpdate",value:function(t,e){for(var n in t)if(t[n]!==this.props[n])return!0;for(var o in e)if(e[o]instanceof Array&&!s.b(e[o],this.state[o])||!(e[o]instanceof Array)&&e[o]!==this.state[o])return!0;return!1}},{key:"componentWillReceiveProps",value:function(t){var e=this;null!=t&&t.from===this.props.from&&t.to===this.props.to&&t.bend===this.props.bend||(null==t&&(t=this.props),MathJax.Hub.Queue(function(){var n=t,o=n.cellSize,r=function(t){return'.grid-cell[data-position="'+t.join(",")+'"] .value'},i=document.querySelector(r(t.from)),a=document.querySelector(r(t.to)),l=0,u=0,p=0,f=0;if(null!=i){var h=i.getBoundingClientRect(),b=h.width,m=h.height;l=b,u=m}if(null!=a){var v=a.getBoundingClientRect(),y=v.width,g=v.height;p=y,f=g}var _=[p,f].map(function(t){return Math.min(o,t+20)}),k=d(_,2);p=k[0],f=k[1];var w=[l,u].map(function(t){return Math.min(o,t+40)}),C=d(w,2);l=C[0],u=C[1];var O=[t.from,t.to].map(function(t){return t.map(function(t){return t*o+o/2})}),j=d(O,2),P=j[0],S=j[1],E=s.c(.5,s.a(P,S)),x=s.d(S,P),M=e.getLengthAngle(),D=M.length,A=s.a(E,s.c(D*Math.tan(-(t.bend||0)*Math.PI/180)/2,c.e(c.a(x)))),T=c.b(P,l,u),N=c.b(S,p,f),L=c.c(T,P,A)[0],I=c.c(N,A,S)[0];e.setState({startPoint:L||P,endPoint:I||S})}))}},{key:"componentDidUpdate",value:function(t,e){var n=this;if(null!=this.valueElement){var o=!0,r=!1,i=void 0;try{for(var a,l=this.valueElement.querySelectorAll(['span[id^="MathJax"]',".MathJax_Preview","script"].join(", "))[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){a.value.remove()}}catch(t){r=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}this.props.value&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.valueElement]),MathJax.Hub.Queue(function(){if(null==t||n.props.value!==t.value||n.props.labelPosition!==t.labelPosition||n.props.from!==t.from||n.props.to!==t.to||n.props.bend!==t.bend||n.state.startPoint!==e.startPoint||n.state.endPoint!==e.endPoint){null==t&&(t=n.props);var o=n.edgePath.getBBox(),r=window.getComputedStyle(n.valueElement),i=r.width,a=r.height,l=[i,a].map(parseFloat),u=d(l,2);i=u[0],a=u[1];var s=n.getLengthAngle(),c=s.angle,p=a*Math.abs(Math.cos(c))+i*Math.abs(Math.sin(c)),f=p-a;n.setState({labelX:"calc(50% + "+(-i/2-6.5)+"px)",labelY:{left:o.y-a-f/2-5,right:o.y+o.height+f/2+5,inside:n.props.bend>0?o.y-a/2:o.y+o.height-a/2}[n.props.labelPosition||"left"]})}})}}},{key:"getLengthAngle",value:function(){var t=this.state,e=t.startPoint,n=t.endPoint,o=s.d(n,e),r=d(o,2),i=r[0],a=r[1];return{length:c.d([i,a]),angle:Math.atan2(a,i)}}},{key:"render",value:function(){var t=this;if(!s.b(this.props.from,this.props.to)){var e=this.state,n=e.startPoint,o=e.endPoint,r=s.c(.5,s.a(n,o)),i=d(r,2),l=i[0],c=i[1],p=this.getLengthAngle(),f=p.length,h=p.angle,b=180*h/Math.PI,m=this.props.bend||0,v=f/2,y=f*Math.tan(m*Math.PI/180)/2,g=Math.max(Math.abs(y)+13,13),_="M 9.764 "+g/2+" Q "+(9.764+v)+" "+(g/2-y)+" "+f+" "+g/2;return Object(a.h)("li",{"data-id":this.props.id,class:u()("grid-edge",{selected:this.props.selected,phantom:this.props.phantom}),style:{height:g,width:f+13,left:l-(f+13)/2,top:c-g/2,transform:"rotate("+b+"deg)"},onClick:this.props.onClick},Object(a.h)("svg",{ref:function(e){return t.svgElement=e},width:f+13,height:g},Object(a.h)("path",{class:"mouse",fill:"none","stroke-width":"12",stroke:"transparent","stroke-linecap":"square",d:_}),Object(a.h)("path",{ref:function(e){return t.edgePath=e},fill:"none","stroke-width":"double"==this.props.line?"3":"1",stroke:"double"==this.props.line?"red":"black","stroke-dasharray":{double:null,solid:null,dashed:"7, 3",dotted:"2, 4"}[this.props.line],d:_}),Object(a.h)("image",{x:"0",y:g/2-6.5,width:"9.764",height:"13",transform:"rotate("+-m+" 9.764 "+g/2+")",xlinkHref:"./img/arrow/"+(this.props.tail||"none")+".svg"}),Object(a.h)("image",{x:f-9.764,y:g/2-6.5,width:"9.764",height:"13",transform:"rotate("+m+" "+f+" "+g/2+")",xlinkHref:"./img/arrow/"+(this.props.head||"default")+".svg"})),Object(a.h)("div",{ref:function(e){return t.valueElement=e},class:u()("value",this.props.labelPosition),style:{left:this.state.labelX,top:this.state.labelY,transform:"rotate("+-b+"deg)"}},this.props.value?"\\("+this.props.value+"\\)":Object(a.h)("span",{class:"hide"},"_")))}}}]),e}(a.Component);e.a=f},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e,n){var o=c(t,2);return{width:e,height:n,left:o[0]-e/2,top:o[1]-n/2}}function i(t,e){var n=t.left,o=t.top,r=t.width,i=t.height,a=c(e,2),l=a[0],u=a[1];return n<=l&&l<=n+r&&o<=u&&u<=o+i}function a(t,e,n){var r=t.left,a=t.top,l=t.width,u=t.height,s=c(e,2),d=s[0],p=s[1],f=c(n,2),h=f[0],b=f[1],m=[h-d,b-p],v=[r,a];return[d,p].map(function(t,e){return[v[e],v[e]+[l,u][e]].map(function(n){return(n-t)/m[e]})}).reduce(function(t,e){return[].concat(o(t),o(e))},[]).filter(function(t){return 0<=t&&t<=1}).map(function(t){return e.map(function(e,n){return e+t*m[n]})}).filter(function(e){return i(t,e)})}function l(t){var e=c(t,2),n=e[0];return[-e[1],n]}function u(t){return Math.sqrt(t.reduce(function(t,e){return t+e*e},0))}function s(t){var e=u(t);return t.map(function(t){return t/e})}e.b=r,e.c=a,e.a=l,e.d=u,e.e=s;var c=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=n(0),u=(n.n(l),n(1)),s=n.n(u),c=n(2),d=n(5),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.handleButtonClick=function(e){return null==t.buttonClickHandlersCache&&(t.buttonClickHandlersCache={}),null==t.buttonClickHandlersCache[e]&&(t.buttonClickHandlersCache[e]=function(n){var r=t.props,i=r.data,a=r.onChange,l=void 0===a?function(){}:a,u={};if(["tail","mapsto","twoheads"].includes(e)){var s="twoheads"===e?"head":"tail";u=o({},s,i[s]===e?"none":e)}else if("head"===e)u={head:null==i.head?"none":null};else if(["solid","dashed","dotted","double"].includes(e))u={line:e};else if(["labelleft","labelright","labelinside"].includes(e))u={labelPosition:e.slice(5)};else if(["hook","harpoon"].includes(e)){var d="hook"===e?"tail":"head",f=[e,e+"alt","none"],h=(f.indexOf(i[d])+1)%f.length;u=o({},d,f[h])}else if(["bendleft","bendright"].includes(e)){var b=i.bend,m=void 0===b?0:b,v=0===m||("bendleft"===e?m>0:m<0),y=0!==m?Math.sign(m):"bendleft"===e?1:-1,g=[0,30,49,60,67,71,74,76,78,79,80],_=g.reduce(function(t,e,n){return e<=Math.abs(m)?n:t},-1);_<g.length-1&&m>=(g[_+1]+g[_])/2&&_++;var k=y*g[Math.min(_+(2*+v-1),g.length-1)];u={bend:c.e(-80,80,k)}}else if(["reversearrow"].includes(e)){var w=i.from,C=i.to,O=i.labelPosition,j=void 0===O?"left":O;u={to:w,from:C};var P=j;"left"===j?P="right":"right"===j&&(P="left"),u.labelPosition=P,null!=i.bend&&(u.bend=-i.bend)}l({data:p({},i,u)})}),t.buttonClickHandlersCache[e]},t.handleEditButtonClick=function(){t.updateEditPosition(),t.setState({edit:!0})},t.handleFormSubmit=function(e){console.log(e.keyCode),e.preventDefault(),t.setState({edit:!1})},t.handleInputBlur=function(){t.setState({edit:!1})},t.handleInputChange=function(e){var n=e.currentTarget.value,o=t.props.onChange;(void 0===o?function(){}:o)({data:p({},t.props.data,{value:n})})},t.handleInputKeyDown=function(t){t.stopPropagation()},t.handleInputKeyUp=function(e){27===e.keyCode&&(e.stopPropagation(),t.setState({edit:!1}))},t.state={edit:!1,editTop:0,editLeft:0},t}return a(e,t),f(e,[{key:"componentDidMount",value:function(){var t=this,e={38:"bendleft",40:"bendright",82:"reversearrow",65:"labelleft",83:"labelinside",68:"labelright"},n=[46,8];document.addEventListener("keydown",function(o){if(t.props.show&&!t.state.edit)if(null!=e[o.keyCode])o.preventDefault(),t.handleButtonClick(e[o.keyCode])();else if(n.includes(o.keyCode)){o.preventDefault();var r=t.props.onRemoveClick,i=void 0===r?function(){}:r;i(o)}else 13==o.keyCode&&(o.preventDefault(),t.handleEditButtonClick())})}},{key:"shouldComponentUpdate",value:function(t,e){return t.show!==this.props.show||t.data!==this.props.data||e.edit!==this.state.edit||e.editTop!==this.state.editTop||e.editLeft!==this.state.editLeft}},{key:"componentDidUpdate",value:function(t,e){!e.edit&&this.state.edit?this.inputElement.select():e.edit&&!this.state.edit&&this.inputElement.blur()}},{key:"updateEditPosition",value:function(){var t=document.querySelector('.grid-edge[data-id="'+this.props.edgeId+'"] .value'),e=t.getBoundingClientRect(),n=e.left,o=e.top,r=e.width,i=window.getComputedStyle(this.editElement),a=i.width,l=i.height;this.setState({editLeft:n+r/2-parseFloat(a)/2,editTop:o-parseFloat(l)-10})}},{key:"render",value:function(){var t=this,e=null==this.props.data?{}:this.props.data;return Object(l.h)("section",{id:"properties",class:s()({show:this.props.show,edit:this.state.edit})},Object(l.h)(d.c,null,Object(l.h)(d.a,{checked:!1,icon:"./img/properties/reverse.svg",name:"Reverse Arrow (R)",onClick:this.handleButtonClick("reversearrow")}),Object(l.h)(d.b,null),Object(l.h)(d.a,{checked:"tail"===e.tail,icon:"./img/properties/tail.svg",name:"Tail",onClick:this.handleButtonClick("tail")}),Object(l.h)(d.a,{checked:"mapsto"===e.tail,icon:"./img/properties/mapsto.svg",name:"Maps To",onClick:this.handleButtonClick("mapsto")}),Object(l.h)(d.a,{checked:["hook","hookalt"].includes(e.tail),icon:"./img/properties/"+("hookalt"===e.tail?"hookalt":"hook")+".svg",name:"Hook",onClick:this.handleButtonClick("hook")}),Object(l.h)(d.b,null),Object(l.h)(d.a,{icon:"./img/properties/bendright.svg",name:"Bend Right (Arrow Key Down)",onClick:this.handleButtonClick("bendright")}),Object(l.h)(d.a,{icon:"./img/properties/bendleft.svg",name:"Bend Left (Arrow Key Up)",onClick:this.handleButtonClick("bendleft")}),Object(l.h)(d.b,null),Object(l.h)(d.a,{checked:"dotted"===e.line,icon:"./img/properties/dotted.svg",name:"Dotted",onClick:this.handleButtonClick("dotted")}),Object(l.h)(d.a,{checked:"dashed"===e.line,icon:"./img/properties/dashed.svg",name:"Dashed",onClick:this.handleButtonClick("dashed")}),Object(l.h)(d.a,{checked:"double"===!e.line,icon:"./img/properties/double.svg",name:"Double",onClick:this.handleButtonClick("double")}),Object(l.h)(d.a,{checked:!e.line||"solid"===e.line,icon:"./img/properties/solid.svg",name:"Solid",onClick:this.handleButtonClick("solid")}),Object(l.h)(d.b,null),Object(l.h)(d.a,{checked:["harpoon","harpoonalt"].includes(e.head),icon:"./img/properties/"+("harpoonalt"===e.head?"harpoonalt":"harpoon")+".svg",name:"Harpoon",onClick:this.handleButtonClick("harpoon")}),Object(l.h)(d.a,{checked:null==e.head,icon:"./img/properties/head.svg",name:"Default Head",onClick:this.handleButtonClick("head")}),Object(l.h)(d.a,{checked:"twoheads"==e.head,icon:"./img/properties/twoheads.svg",name:"Two Heads",onClick:this.handleButtonClick("twoheads")}),Object(l.h)(d.b,null),Object(l.h)(d.a,{checked:!e.labelPosition||"left"===e.labelPosition,icon:"./img/properties/labelleft.svg",name:"Left Label (A)",onClick:this.handleButtonClick("labelleft")}),Object(l.h)(d.a,{checked:"inside"===e.labelPosition,icon:"./img/properties/labelinside.svg",name:"Inside Label (S)",onClick:this.handleButtonClick("labelinside")}),Object(l.h)(d.a,{checked:"right"===e.labelPosition,icon:"./img/properties/labelright.svg",name:"Right Label (D)",onClick:this.handleButtonClick("labelright")}),Object(l.h)(d.a,{checked:this.state.edit,icon:"./img/properties/edit.svg",name:"Edit Label (Enter)",onClick:this.handleEditButtonClick}),Object(l.h)(d.b,null),Object(l.h)(d.a,{class:"remove",icon:"./img/properties/trash.svg",name:"Remove Arrow (Del)",onClick:this.props.onRemoveClick})),Object(l.h)("form",{ref:function(e){return t.editElement=e},class:"edit",style:{left:this.state.editLeft,top:this.state.editTop},onSubmit:this.handleFormSubmit},Object(l.h)("input",{ref:function(e){return t.inputElement=e},type:"text",value:e.value,onBlur:this.handleInputBlur,onInput:this.handleInputChange,onKeyDown:this.handleInputKeyDown,onKeyUp:this.handleInputKeyUp})))}}]),e}(l.Component);e.a=h}]);
//# sourceMappingURL=bundle.js.map